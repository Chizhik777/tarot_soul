<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞—Ä–æ —Å –î—É—à–æ–π | –ï–ª–µ–Ω–∞</title>
    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåô</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        void: '#020202', 
                        gold: {
                            100: '#F9F1D8',
                            300: '#E6C87C',
                            500: '#D4AF37', 
                            700: '#997B1E',
                            900: '#423206',
                        },
                    },
                    fontFamily: {
                        heading: ['Cinzel Decorative', 'serif'],
                        body: ['Cormorant Gramond', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #000000;
            color: #E6C87C;
            overflow-x: hidden;
            cursor: none; 
            position: relative;
        }

        @media (hover: none) and (pointer: coarse) {
            body { cursor: auto !important; }
            #custom-cursor { display: none !important; }
            .btn-gold, .portal-container, .glass-panel, .cursor-pointer, input, textarea, button, .fab-gratitude { cursor: pointer !important; }
        }

        #custom-cursor {
            position: fixed;
            width: 20px; height: 20px;
            background: radial-gradient(circle, #fff 0%, #D4AF37 50%, transparent 80%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 20px 5px rgba(212, 175, 55, 0.6);
            mix-blend-mode: screen;
            transition: width 0.2s, height 0.2s;
        }
        #custom-cursor.active { width: 40px; height: 40px; }

        #preloader { 
            transition: opacity 0.8s ease-out, visibility 0.8s; 
            z-index: 9999; 
            position: fixed; 
            inset: 0; 
            background: #000; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        #preloader.loaded { opacity: 0; visibility: hidden; }

        #chaos-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -3; background: #000; }
        #magic-dust { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; mix-blend-mode: screen; }

        .glass-panel {
            background: rgba(5, 5, 5, 0.85);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.9);
            border-radius: 20px;
            transition: all 0.4s ease;
        }

        .text-gold-glow {
            color: transparent;
            background: linear-gradient(to bottom, #FFFFFF, #F9F1D8, #D4AF37);
            -webkit-background-clip: text;
            text-shadow: 0 10px 30px rgba(0, 0, 0, 0.9);
        }

        /* --- MAGIC CRYSTAL BALL --- */
        .ball-scene {
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 50;
        }
        .crystal-ball-group {
            position: relative;
            width: 100px;
            height: 140px;
            animation: levitate 3s ease-in-out infinite;
        }
        .magic-sphere {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.6) 0%, rgba(212, 175, 55, 0.3) 40%, rgba(0, 0, 0, 0.9) 100%);
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.2);
            position: relative;
            margin: 0 auto;
            overflow: hidden;
            border: 1px solid rgba(212, 175, 55, 0.4);
        }
        .magic-sphere::before {
            content: '';
            position: absolute;
            inset: -50%;
            background: conic-gradient(from 0deg, transparent, rgba(212, 175, 55, 0.4), transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: spin-fx 4s linear infinite;
            filter: blur(10px);
        }
        .sphere-stand {
            width: 80px;
            height: 35px;
            background: linear-gradient(to bottom, #332200, #000);
            margin: -10px auto 0;
            border-radius: 50% 50% 20% 20%;
            border-top: 3px solid #D4AF37;
            position: relative;
            z-index: 40;
            box-shadow: 0 10px 20px rgba(0,0,0,0.8);
        }

        @keyframes levitate {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        /* --- –ö–ê–†–¢–´ --- */
        .tarot-card-wrapper { perspective: 1200px; }
        .tarot-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-style: preserve-3d; }
        .flipped .tarot-card-inner { transform: rotateY(180deg); }
        .card-face { position: absolute; inset: 0; backface-visibility: hidden; border-radius: 12px; border: 2px solid #997B1E; overflow: hidden; }
        .card-front-design {
            background: #0a0500;
            background-image: radial-gradient(circle at 50% 50%, rgba(212, 175, 55, 0.15) 0%, transparent 60%);
            display: flex; align-items: center; justify-content: center;
        }
        .eye-symbol {
            width: 60px; height: 60px;
            border: 2px solid #D4AF37; border-radius: 0 70%; transform: rotate(45deg);
            position: relative; box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }
        .eye-symbol::after {
            content: ''; position: absolute; width: 24px; height: 24px;
            background: #D4AF37; border-radius: 50%; top: 50%; left: 50%;
            transform: translate(-50%, -50%); box-shadow: 0 0 10px #D4AF37;
        }
        .card-back { background: #000; transform: rotateY(180deg); display: flex; flex-direction: column; align-items: center; justify-content: center; border-color: #D4AF37; }

        /* PORTAL */
        .portal-container { position: relative; width: 180px; height: 180px; margin: 0 auto; display: flex; align-items: center; justify-content: center; }
        .portal-ring { position: absolute; inset: 0; border-radius: 50%; border: 2px solid transparent; border-top-color: #D4AF37; border-bottom-color: #997B1E; animation: spin-fx 10s linear infinite; filter: drop-shadow(0 0 10px #D4AF37); }
        .portal-ring:nth-child(2) { inset: 15px; border-left-color: #333; border-right-color: #666; animation: spin-fx 7s linear infinite reverse; border-top-color: transparent; border-bottom-color: transparent; }
        .portal-core { width: 120px; height: 120px; background: radial-gradient(circle, #000 30%, #1a1a1a 100%); border-radius: 50%; position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; overflow: hidden; box-shadow: 0 0 40px rgba(212, 175, 55, 0.2); transition: all 0.5s ease; }
        .portal-mist { position: absolute; inset: -50%; background: conic-gradient(transparent, rgba(212, 175, 55, 0.3), transparent, rgba(255, 255, 255, 0.1), transparent); animation: spin-fx 4s linear infinite; filter: blur(20px); }
        @keyframes spin-fx { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .btn-gold {
            background: transparent; border: 1px solid #D4AF37; color: #D4AF37; padding: 12px 24px;
            font-family: 'Cinzel Decorative', serif; transition: all 0.4s ease;
            cursor: pointer;
        }
        .btn-gold:hover { background: #D4AF37; color: #000; box-shadow: 0 0 30px rgba(212, 175, 55, 0.5); }

        /* --- FLOATING GRATITUDE BUTTON --- */
        .fab-gratitude {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            width: 65px; height: 65px;
            background: #D4AF37;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.7);
            color: #000;
            font-size: 26px;
            animation: pulse-fav 2.5s infinite;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .fab-gratitude:hover { transform: scale(1.1); box-shadow: 0 0 45px #D4AF37; }
        @keyframes pulse-fav { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        .gallery-scroll::-webkit-scrollbar { display: none; }
        .gallery-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes spin-fx { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    </style>
</head>
<body class="min-h-screen flex flex-col font-body selection:bg-gold-500 selection:text-black">

    <!-- PRELOADER -->
    <div id="preloader">
        <div class="text-center">
            <i class="fas fa-moon text-6xl text-gold-500 animate-pulse mb-4"></i>
            <h2 class="font-heading text-2xl text-gold-100 tracking-widest uppercase text-center px-4">Tarot Soul</h2>
        </div>
    </div>

    <!-- –ö–ù–û–ü–ö–ê –ü–û–î–î–ï–†–ñ–ö–ò (–°–ö–†–û–õ–õ –ö –†–ï–ö–í–ò–ó–ò–¢–ê–ú) -->
    <a href="#energy-exchange" class="fab-gratitude" title="–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç">
        <i class="fas fa-heart"></i>
    </a>

    <div id="custom-cursor"></div>
    <canvas id="chaos-bg"></canvas>
    <canvas id="magic-dust"></canvas>

    <!-- HEADER -->
    <header class="fixed w-full z-50 top-0 left-0 bg-void/80 backdrop-blur-md border-b border-white/5 py-4">
        <div class="container mx-auto px-6 flex justify-between items-center text-center">
            <div class="flex items-center gap-3">
                <i class="fas fa-moon text-gold-500 text-xl"></i>
                <span class="font-heading text-xl text-gold-300 tracking-wider text-center">Tarot Soul</span>
            </div>
            <div class="flex gap-4 items-center">
                 <a href="#energy-exchange" class="hidden md:block text-gold-300 text-xs font-bold uppercase tracking-widest hover:text-white transition">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å ‚ù§</a>
                 <a href="#booking-section" class="btn-gold rounded-full text-xs font-bold tracking-widest uppercase">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</a>
            </div>
        </div>
    </header>

    <!-- HERO -->
    <section class="min-h-screen flex flex-col items-center justify-center text-center px-4 relative pt-20">
        <div class="absolute top-1/4 left-10 opacity-20 text-gold-700 text-6xl animate-bounce" style="animation-duration: 8s">‚òæ</div>
        <div class="absolute bottom-1/4 right-10 opacity-20 text-gold-700 text-6xl animate-bounce" style="animation-duration: 12s">üúÅ</div>
        <h1 class="font-heading text-5xl md:text-8xl text-gold-glow uppercase text-center">–¢–∞—Ä–æ —Å –î—É—à–æ–π</h1>
        <p class="text-xl md:text-2xl text-gold-100 italic max-w-2xl font-light mb-12 text-center">"–¢–∞–º, –≥–¥–µ –¢—å–º–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å–æ –°–≤–µ—Ç–æ–º, —Ä–æ–∂–¥–∞–µ—Ç—Å—è –ò—Å—Ç–∏–Ω–∞."</p>
        <div class="animate-bounce text-gold-500/50 mt-10 text-center text-center"><i class="fas fa-chevron-down text-2xl text-center"></i></div>
    </section>

    <div class="container mx-auto px-4 pb-20 max-w-5xl space-y-32 relative z-10">

        <!-- 1. –ö–ê–†–¢–´ -->
        <section>
            <h2 class="font-heading text-3xl md:text-4xl text-gold-300 text-center mb-12 uppercase tracking-widest text-center">–ó–æ–ª–æ—Ç–æ–π –†–∞—Å–∫–ª–∞–¥</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 h-auto md:h-[400px]" id="tarot-deck"></div>
            
            <div id="tarot-result" class="hidden glass-panel p-8 mt-12 text-center max-w-2xl mx-auto border-gold-500/30">
                <div class="text-6xl text-gold-500 mb-4 text-center text-center"><i id="result-icon" class="text-center"></i></div>
                <h3 id="result-title" class="font-heading text-3xl text-gold-100 mb-4 tracking-wider text-center text-center text-center"></h3>
                <p id="result-desc" class="text-lg text-gray-300 italic mb-8 leading-relaxed font-light text-center text-center text-center"></p>
                <div class="flex justify-center text-center text-center">
                    <button onclick="window.resetTarot()" class="btn-gold rounded-full text-sm uppercase tracking-widest text-center text-center">–î—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å</button>
                </div>
            </div>
        </section>

        <!-- 2. –ü–û–†–¢–ê–õ -->
        <section class="flex flex-col items-center">
            <h2 class="font-heading text-3xl text-gold-300 mb-8 font-heading uppercase tracking-widest text-center text-center text-center">–ü–æ—Ä—Ç–∞–ª –û—Ç–≤–µ—Ç–æ–≤</h2>
            <div class="portal-container cursor-pointer" onclick="window.activatePortal()">
                <div class="portal-ring text-center text-center"></div>
                <div class="portal-ring text-center text-center"></div>
                <div class="portal-core text-center text-center">
                    <div class="portal-mist text-center text-center" id="portal-mist"></div>
                    <span id="portal-text" class="relative z-20 font-heading text-4xl text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.8)] text-center text-center text-center">?</span>
                </div>
            </div>
            <p class="mt-6 text-xs text-gold-700 tracking-[0.4em] uppercase opacity-50 text-center text-center text-center">–ù–∞–∂–º–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞</p>
        </section>

        <!-- 3. –≠–ù–ï–†–ì–û–û–ë–ú–ï–ù (–†–ï–ö–í–ò–ó–ò–¢–´ –ò QR) -->
        <section id="energy-exchange" class="scroll-mt-32">
            <div class="glass-panel p-8 md:p-12 max-w-3xl mx-auto text-center border-gold-500/30 bg-gradient-to-br from-gold-900/10 to-black relative overflow-hidden">
                <div class="absolute -right-10 -bottom-10 opacity-5 text-9xl text-center text-center text-center"><i class="fas fa-heart text-center text-center text-center text-center"></i></div>
                <h2 class="font-heading text-3xl text-gold-300 mb-6 uppercase tracking-wider text-center text-center text-center">–≠–Ω–µ—Ä–≥–æ–æ–±–º–µ–Ω</h2>
                <div class="space-y-6 text-lg md:text-xl text-gray-200 font-light italic leading-relaxed text-center text-center text-center text-center">
                    <p>–î–æ—Ä–æ–≥–∏–µ, —è –≤–µ—Ä—é –≤ –±–∞–ª–∞–Ω—Å. –ú–æ–∏ —Ä–∞—Å–∫–ª–∞–¥—ã –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –∑–∞ <span class="text-gold-300 font-bold uppercase tracking-widest text-center text-center text-center">Donation</span> ‚Äî –≤—ã —Å–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç–µ —Ä–∞–∑–º–µ—Ä –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –ø–æ –∑–æ–≤—É —Å–µ—Ä–¥—Ü–∞.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center pt-8">
                        <!-- QR –ö–æ–¥ -->
                        <div class="flex flex-col items-center space-y-4">
                            <div class="w-48 h-48 bg-white p-2 rounded-xl border-4 border-gold-500/50 shadow-[0_0_30px_rgba(212,175,55,0.2)]">
                                <!-- –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–£ –ö–ê–†–¢–ò–ù–ö–£ –ù–ê –í–ê–® QR-–ö–û–î –ò–ó –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø –ë–ê–ù–ö–ê -->
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://yoomoney.ru/to/4100119434367950" alt="QR –°–ë–ü" class="w-full h-full object-contain">
                            </div>
                            <p class="text-xs uppercase tracking-widest text-gold-500 font-bold text-center text-center">–°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –¥–ª—è –°–ë–ü</p>
                        </div>

                        <!-- –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ -->
                        <div class="flex flex-col items-center space-y-6">
                            <p class="text-xs uppercase tracking-widest text-gold-500/60 italic text-center text-center">–ü–µ—Ä–µ–≤–æ–¥ –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º:</p>
                            <div class="bg-black/60 p-4 rounded-lg border border-gold-500/30 flex flex-col items-center space-y-3 w-full">
                                <span id="requisites-num" class="text-xl md:text-2xl font-mono text-white tracking-widest text-center text-center">4100119434367950</span>
                                <button onclick="copyRequisites()" class="btn-gold py-2 px-6 rounded-full text-xs font-bold uppercase tracking-tighter hover:scale-105 transition text-center text-center">
                                    <i class="fas fa-copy mr-2 text-center text-center"></i>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä
                                </button>
                                <span id="copy-status" class="text-green-500 text-[10px] uppercase font-bold opacity-0 transition-opacity text-center text-center">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</span>
                            </div>
                            <p class="text-xs text-gray-500 text-center leading-tight text-center text-center">–ü–æ–¥—Ö–æ–¥–∏—Ç –ª—é–±–∞—è –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞<br>–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–∞–Ω–∫–∞</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. –ó–ê–ü–ò–°–¨ -->
        <section id="booking-section" class="scroll-mt-32">
            <h2 class="font-heading text-3xl md:text-4xl text-gold-300 text-center mb-12 uppercase tracking-widest text-center text-center text-center text-center">–ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º</h2>
            <div class="glass-panel p-8 max-w-3xl mx-auto relative border-gold-500/30 shadow-2xl">
                <form id="booking-form" class="space-y-8" onsubmit="window.submitBooking(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <input type="text" id="book-name" required class="input-gold" placeholder="–í–∞—à–µ –ò–º—è">
                        <input type="text" id="book-contact" required class="input-gold" placeholder="Telegram @username">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label class="block text-gold-300 text-xs uppercase mb-2 text-center tracking-widest text-center text-center">–î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞</label>
                            <input type="date" id="book-date" required class="input-gold text-center" onchange="window.generateTimeSlots(this.value)">
                        </div>
                        <div>
                             <label class="block text-gold-300 text-xs uppercase mb-2 text-center tracking-widest text-center text-center">–°–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è</label>
                             <div id="time-slots-container" class="grid grid-cols-3 gap-2">
                                 <div class="col-span-3 text-center text-gray-600 text-sm py-2">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</div>
                             </div>
                             <input type="hidden" id="selected-time" required>
                             <p id="time-error" class="text-red-500 text-xs mt-1 hidden text-center uppercase font-bold text-center text-center text-center">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</p>
                        </div>
                    </div>
                    <textarea id="book-notes" rows="3" class="input-gold" placeholder="–í–∞—à –∑–∞–ø—Ä–æ—Å –∏–ª–∏ —Ç–µ–º–∞ —Ä–∞—Å–∫–ª–∞–¥–∞..."></textarea>
                    <button type="submit" id="submit-booking-btn" class="w-full btn-gold rounded-lg font-heading text-lg font-bold shadow-gold-900/40 transition-all uppercase text-center text-center text-center text-center text-center">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                </form>
            </div>
        </section>

        <!-- 5. –û–¢–ó–´–í–´ -->
        <section class="relative text-center">
            <h2 class="font-heading text-3xl text-center text-gold-300 mb-12 uppercase tracking-widest text-center text-center text-center text-center">–ö–Ω–∏–≥–∞ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</h2>
            <div class="relative group/gallery">
                <button onclick="window.scrollGallery(-1)" class="absolute -left-4 md:-left-14 top-1/2 -translate-y-1/2 z-20 bg-void/90 border border-gold-500/30 text-gold-500 w-10 h-10 md:w-14 md:h-14 rounded-full flex items-center justify-center cursor-pointer shadow-xl transition-all text-center text-center text-center text-center"><i class="fas fa-chevron-left text-xl text-center text-center text-center text-center"></i></button>
                <button onclick="window.scrollGallery(1)" class="absolute -right-4 md:-right-14 top-1/2 -translate-y-1/2 z-20 bg-void/90 border border-gold-500/30 text-gold-500 w-10 h-10 md:w-14 md:h-14 rounded-full flex items-center justify-center cursor-pointer shadow-xl transition-all text-center text-center text-center text-center"><i class="fas fa-chevron-right text-xl text-center text-center text-center text-center text-center"></i></button>
                <div id="gallery-container" class="flex overflow-x-auto gap-6 pb-8 gallery-scroll snap-x scroll-pl-4">
                    <div class="snap-center shrink-0 w-72 h-[480px] glass-panel p-2 cursor-pointer group text-center text-center text-center" onclick="window.openImageModal(this)"><img src="photo_2026-01-16_12-10-08.jpg" class="w-full h-full object-cover rounded-lg group-hover:opacity-80 transition" onerror="this.src='https://placehold.co/300x500/111/D4AF37?text=–û—Ç–∑—ã–≤+1'"></div>
                    <div class="snap-center shrink-0 w-72 h-[480px] glass-panel p-2 cursor-pointer group text-center text-center text-center text-center" onclick="window.openImageModal(this)"><img src="photo_2026-01-16_12-10-09.jpg" class="w-full h-full object-cover rounded-lg group-hover:opacity-80 transition" onerror="this.src='https://placehold.co/300x500/111/D4AF37?text=–û—Ç–∑—ã–≤+2'"></div>
                    <div class="snap-center shrink-0 w-72 h-[480px] glass-panel p-2 cursor-pointer group text-center text-center text-center text-center text-center" onclick="window.openImageModal(this)"><img src="photo_2026-01-16_12-10-10.jpg" class="w-full h-full object-cover rounded-lg group-hover:opacity-80 transition" onerror="this.src='https://placehold.co/300x500/111/D4AF37?text=–û—Ç–∑—ã–≤+3'"></div>
                    <div class="snap-center shrink-0 w-72 h-[480px] glass-panel p-2 cursor-pointer group text-center text-center text-center text-center text-center text-center text-center" onclick="window.openImageModal(this)"><img src="photo_2026-01-16_12-10-11.jpg" class="w-full h-full object-cover rounded-lg group-hover:opacity-80 transition" onerror="this.src='https://placehold.co/300x500/111/D4AF37?text=–û—Ç–∑—ã–≤+4'"></div>
                    <div class="snap-center shrink-0 w-72 h-[480px] glass-panel p-2 cursor-pointer group text-center text-center text-center text-center text-center text-center text-center text-center" onclick="window.openImageModal(this)"><img src="photo_2026-01-16_15-44-30.jpg" class="w-full h-full object-cover rounded-lg group-hover:opacity-80 transition" onerror="this.src='https://placehold.co/300x500/111/D4AF37?text=–û—Ç–∑—ã–≤+5'"></div>
                </div>
            </div>
            <div id="reviews-list" class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-12 text-center text-center text-center text-center"></div>
            <div class="text-center mt-12 text-center text-center text-center"><button onclick="window.openReviewModal()" class="btn-gold rounded-full text-xs font-bold tracking-widest uppercase text-center text-center text-center text-center text-center text-center">–û—Å—Ç–∞–≤–∏—Ç—å –û—Ç–∑—ã–≤</button></div>
        </section>

    </div>

    <footer class="border-t border-white/5 bg-black py-12 text-center relative z-10 text-center text-center text-center text-center">
        <div class="text-gold-700 text-2xl font-heading mb-4 uppercase tracking-widest text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">Tarot Soul</div>
        <p class="text-gray-700 text-xs uppercase tracking-widest text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center">&copy; 2026 –ï–ª–µ–Ω–∞. –°–¥–µ–ª–∞–Ω–æ —Å –¥—É—à–æ–π.</p>
    </footer>

    <!-- SUCCESS MODAL (CRYSTAL BALL ON STAND - FIXED) -->
    <div id="success-modal" class="fixed inset-0 z-[150] hidden bg-black/95 flex items-center justify-center p-4 backdrop-blur-md text-center text-center text-center text-center">
        <div class="glass-panel w-full max-w-sm p-8 text-center relative shadow-[0_0_80px_rgba(212,175,55,0.5)] border-gold-500/50 text-center text-center text-center text-center">
            <button onclick="document.getElementById('success-modal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-white transition cursor-pointer text-center text-center text-center text-center text-center"><i class="fas fa-times text-xl text-center text-center text-center text-center"></i></button>
            
            <div class="ball-scene text-center text-center text-center text-center text-center">
                <div class="crystal-ball-group text-center text-center text-center text-center text-center text-center">
                    <div class="magic-sphere text-center text-center text-center text-center text-center text-center text-center"></div>
                    <div class="sphere-stand text-center text-center text-center text-center text-center text-center text-center text-center"></div>
                </div>
            </div>

            <h3 class="font-heading text-2xl text-gold-300 mb-2 uppercase tracking-widest text-center text-center text-center text-center text-center text-center text-center">–ú–∞–≥–∏—è –≤ –ø—É—Ç–∏!</h3>
            <p class="text-gray-300 text-sm mb-8 leading-relaxed text-center text-center text-center text-center text-center text-center">–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞. <span class="text-white font-bold underline italic text-center text-center text-center text-center text-center text-center">–ß—Ç–æ–±—ã —è –µ—ë —É–≤–∏–¥–µ–ª–∞</span>, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å –≤ Telegram.</p>
            
            <button id="success-telegram-btn" class="w-full btn-gold rounded-lg font-bold uppercase animate-pulse py-4 text-sm tracking-widest bg-gold-500 text-black border-none shadow-[0_0_30px_rgba(212,175,55,0.5)] cursor-pointer hover:scale-105 transition-transform text-center text-center text-center text-center text-center">
                –ü–û–î–¢–í–ï–†–î–ò–¢–¨ –í TELEGRAM
            </button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, getDocs } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';

        const firebaseConfig = {
          apiKey: "AIzaSyD6JtCMJQnvhhf5H59qtSLWiSMdlXl6VmE",
          authDomain: "taro-7c548.firebaseapp.com",
          projectId: "taro-7c548",
          storageBucket: "taro-7c548.firebasestorage.app",
          messagingSenderId: "668255114634",
          appId: "1:668255114634:web:c08ee16a70d8b95577e473",
          measurementId: "G-RSTXZF2T2C"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = "taro-soul-v2-stable";

        let user = null;
        let isAuthReady = false;

        const init = async () => {
            try {
                const u = await signInAnonymously(auth);
                user = u.user;
                isAuthReady = true;
                loadReviews();
                document.getElementById('preloader').classList.add('loaded');
            } catch (e) { isAuthReady = true; document.getElementById('preloader').classList.add('loaded'); }
        };

        window.generateTimeSlots = async function(dateString) {
            const container = document.getElementById('time-slots-container');
            const hiddenInput = document.getElementById('selected-time');
            if(!container) return;
            container.innerHTML = '<div class="col-span-3 text-center text-gold-500 text-xs py-2"><i class="fas fa-spinner fa-spin"></i> –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...</div>';
            hiddenInput.value = '';
            if (!isAuthReady) {
                await new Promise(res => { const check = setInterval(() => { if(isAuthReady) { clearInterval(check); res(); } }, 100); });
            }
            let bookedTimes = [];
            if (db && user) {
                try {
                    const q = collection(db, 'artifacts', appId, 'public', 'data', 'bookings');
                    const snap = await getDocs(q);
                    snap.forEach(docSnap => { const d = docSnap.data(); if (d.date === dateString) bookedTimes.push(d.time); });
                } catch (e) {}
            }
            container.innerHTML = '';
            const now = new Date();
            const todayStr = now.toISOString().split('T')[0];
            const hourNow = now.getHours();
            for(let h = 11; h <= 19; h++) {
                const timeStr = `${h}:00`;
                const isDisabled = (dateString === todayStr && h <= hourNow) || bookedTimes.includes(timeStr);
                const slot = document.createElement('div');
                slot.className = `time-slot ${isDisabled ? 'disabled text-center' : 'text-center'}`;
                slot.innerText = timeStr;
                if(!isDisabled) {
                    slot.onclick = () => {
                        Array.from(container.children).forEach(c => c.classList.remove('selected'));
                        slot.classList.add('selected');
                        hiddenInput.value = timeStr;
                        document.getElementById('time-error').classList.add('hidden');
                    };
                }
                container.appendChild(slot);
            }
        };

        window.submitBooking = async function(e) {
            e.preventDefault();
            const time = document.getElementById('selected-time').value;
            const handle = document.getElementById('book-contact').value;
            const date = document.getElementById('book-date').value;
            const name = document.getElementById('book-name').value;
            const notes = document.getElementById('book-notes').value;
            const btn = document.getElementById('submit-booking-btn');
            if(!time) { document.getElementById('time-error').classList.remove('hidden'); return; }
            btn.disabled = true;
            if (db && user) {
                try {
                    const qCheck = collection(db, 'artifacts', appId, 'public', 'data', 'bookings');
                    const snapCheck = await getDocs(qCheck);
                    let isConflict = false;
                    snapCheck.forEach(ds => { if(ds.data().date === date && ds.data().time === time) isConflict = true; });
                    if (isConflict) { alert("–≠—Ç–æ –≤—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ!"); window.generateTimeSlots(date); btn.disabled = false; return; }
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'bookings'), { name, contact: handle, date, time, notes, createdAt: serverTimestamp() });
                } catch(err) {}
            }
            const msg = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ï–ª–µ–Ω–∞!%0A%0A–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å–∫–ª–∞–¥ (Donation):%0A–ò–º—è: ${name}%0ATelegram: ${handle}%0A–î–∞—Ç–∞: ${date}%0A–í—Ä–µ–º—è: ${time}%0A–ó–∞–ø—Ä–æ—Å: ${notes}`;
            const link = `https://t.me/elena_soul_tarot?text=${msg}`;
            document.getElementById('success-telegram-btn').onclick = () => window.open(link, '_blank');
            document.getElementById('success-modal').classList.remove('hidden');
            e.target.reset();
            document.getElementById('time-slots-container').innerHTML = '<div class="col-span-3 text-center text-gray-600 text-sm py-2 italic text-center">–ó–∞–ø–∏—Å—å –ø—Ä–∏–Ω—è—Ç–∞</div>';
            btn.disabled = false;
        };

        function loadReviews() {
            if (!db || !user) return;
            const ref = collection(db, 'artifacts', appId, 'public', 'data', 'reviews');
            onSnapshot(ref, (snap) => {
                const list = document.getElementById('reviews-list');
                if(!list) return;
                let html = '';
                snap.forEach(docSnap => {
                    const r = docSnap.data();
                    html += `<div class="glass-panel p-6 animate-float text-center" style="animation-duration: 6s">
                        <div class="flex justify-between items-center mb-4 text-center">
                            <span class="font-bold text-white uppercase text-xs text-center">${r.name}</span>
                            <div class="text-gold-300 text-xs text-center">${"‚òÖ".repeat(r.rating || 5)}</div>
                        </div>
                        <p class="text-gray-400 italic text-sm text-center">"${r.text}"</p>
                    </div>`;
                });
                if (html) list.innerHTML = html;
            });
        }

        window.submitReview = async function(e) {
            e.preventDefault();
            if(!db || !user) return;
            await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'reviews'), { name: document.getElementById('review-name').value, text: document.getElementById('review-text').value, rating: 5, createdAt: serverTimestamp() });
            window.closeReviewModal();
            e.target.reset();
        };
        init();
    </script>

    <script>
        const canvasA = document.getElementById('chaos-bg'), ctxA = canvasA.getContext('2d');
        const canvasB = document.getElementById('magic-dust'), ctxB = canvasB.getContext('2d');
        let viewW, viewH, myBlobs = [], myDust = [];

        function fit() {
            viewW = canvasA.width = canvasB.width = window.innerWidth;
            viewH = canvasA.height = canvasB.height = window.innerHeight;
            myBlobs = Array.from({length: 8}, () => ({ x: Math.random()*viewW, y: Math.random()*viewH, r: Math.random()*300+150, vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5, c: Math.random() > 0.5 ? 'rgba(212, 175, 55, 0.12)' : 'rgba(255, 255, 255, 0.05)' }));
        }

        class DustBit {
            constructor(x, y) { this.x = x || Math.random()*viewW; this.y = y || Math.random()*viewH; this.vX = (Math.random()-0.5)*1.5; this.vY = (Math.random()-0.5)*1.5; this.s = Math.random()*2; this.l = 100; }
            u() { this.x += this.vX; this.y += this.vY; this.l--; }
            d() { ctxB.fillStyle = '#D4AF37'; ctxB.globalAlpha = this.l/100; ctxB.beginPath(); ctxB.arc(this.x, this.y, this.s, 0, Math.PI*2); ctxB.fill(); }
        }

        function run() {
            ctxA.fillStyle = '#000'; ctxA.fillRect(0,0,viewW,viewH);
            myBlobs.forEach(b => { b.x += b.vx; b.y += b.vy; if(b.x<0 || b.x>viewW) b.vx *= -1; if(b.y<0 || b.y>viewH) b.vy *= -1; let g = ctxA.createRadialGradient(b.x, b.y, 0, b.x, b.y, b.r); g.addColorStop(0, b.c); g.addColorStop(1, 'transparent'); ctxA.fillStyle = g; ctxA.beginPath(); ctxA.arc(b.x, b.y, b.r, 0, Math.PI*2); ctxA.fill(); });
            ctxB.clearRect(0,0,viewW,viewH); if(myDust.length < 80) myDust.push(new DustBit());
            myDust.forEach((p, i) => { p.u(); p.d(); if(p.l<=0) myDust.splice(i, 1); });
            requestAnimationFrame(run);
        }
        window.addEventListener('resize', fit); fit(); run();

        const curEl = document.getElementById('custom-cursor');
        document.addEventListener('mousemove', e => { if(curEl) { curEl.style.left = e.clientX + 'px'; curEl.style.top = e.clientY + 'px'; } if(Math.random() > 0.8) myDust.push(new DustBit(e.clientX, e.clientY)); });

        // COPY FUNCTION
        window.copyRequisites = () => {
            const num = document.getElementById('requisites-num').innerText;
            const el = document.createElement('textarea');
            el.value = num;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            
            const status = document.getElementById('copy-status');
            status.style.opacity = '1';
            setTimeout(() => { status.style.opacity = '0'; }, 2000);
        };

        // TAROT Logic
        const tItems = [ 
            { n: "–°–æ–ª–Ω—Ü–µ", i: "fa-sun", desc: "–ê–±—Å–æ–ª—é—Ç–Ω—ã–π —É—Å–ø–µ—Ö, —è—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–æ–º–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è. –í –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ —Ç—Ä–∏—É–º—Ñ–∞ ‚Äî –≤—Å–µ —Ç–µ–Ω–∏ –∏—Å—á–µ–∑–∞—é—Ç." }, 
            { n: "–õ—É–Ω–∞", i: "fa-moon", desc: "–í—Ä–µ–º—è –∏–Ω—Ç—É–∏—Ü–∏–∏, —Å–Ω–æ–≤ –∏ —Ç–∞–π–Ω—ã—Ö –ø—Ä–µ–¥—á—É–≤—Å—Ç–≤–∏–π. –ù–µ –≤—Å—ë —Å–µ–π—á–∞—Å —è–≤–ª—è–µ—Ç—Å—è —Ç–µ–º, —á–µ–º –∫–∞–∂–µ—Ç—Å—è." }, 
            { n: "–ó–≤–µ–∑–¥–∞", i: "fa-star", desc: "–°–∏–º–≤–æ–ª –Ω–∞–¥–µ–∂–¥—ã –∏ –≤—ã—Å—à–µ–≥–æ –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞. –í–µ—Ä–Ω—ã–π –ø—É—Ç—å —É–∫–∞–∂–µ—Ç —Å–≤–µ—Ç –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è." },
            { n: "–ú–∞–≥", i: "fa-magic", desc: "–£ –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å. –í—Å—ë –≤ –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö ‚Äî –¥–µ–π—Å—Ç–≤—É–π—Ç–µ —Å–º–µ–ª–æ!" },
            { n: "–ú–∏—Ä", i: "fa-globe-europe", desc: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞, –≥–∞—Ä–º–æ–Ω–∏—è –∏ —Ç—Ä–∏—É–º—Ñ. –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –≤–∞–∂–Ω–æ–π —Ü–µ–ª–∏." }
        ];

        function initTarot() {
            const dck = document.getElementById('tarot-deck');
            if(!dck) return; dck.innerHTML = '';
            for(let i=0; i<3; i++) {
                const c = document.createElement('div');
                c.className = 'tarot-card-wrapper h-[450px] md:h-full cursor-pointer group text-center';
                c.innerHTML = `<div class="tarot-card-inner text-center"><div class="card-face card-front-design text-center"><div class="eye-symbol text-center"></div></div><div class="card-face card-back text-center"></div></div>`;
                c.onclick = () => { if(document.querySelector('.flipped')) return; const d = tItems[Math.floor(Math.random()*tItems.length)]; c.classList.add('flipped'); c.querySelector('.card-back').innerHTML = `<i class="fas ${d.i} text-6xl text-gold-500 mb-6 animate-pulse text-center"></i><div class="font-heading text-xl text-gold-100 uppercase tracking-widest text-center px-4 text-center">${d.n}</div>`; setTimeout(() => { const resultEl = document.getElementById('tarot-result'); document.getElementById('result-icon').className = 'fas '+d.i; document.getElementById('result-title').innerText = d.n; document.getElementById('result-desc').innerText = d.desc; resultEl.classList.remove('hidden'); resultEl.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 600); };
                dck.appendChild(c);
            }
        }
        window.resetTarot = () => { document.getElementById('tarot-result').classList.add('hidden'); initTarot(); document.getElementById('tarot-deck').scrollIntoView({ behavior: 'smooth' }); };
        initTarot();

        window.activatePortal = () => { const pt = document.getElementById('portal-text'), mst = document.getElementById('portal-mist'); const answers = ["–î–ê", "–ù–ï–¢", "–í–ï–†–¨", "–ñ–î–ò", "–®–ê–ù–°"]; pt.style.opacity = '0'; mst.style.animationDuration = '1s'; setTimeout(() => { pt.innerText = answers[Math.floor(Math.random()*answers.length)]; pt.style.opacity = '1'; mst.style.animationDuration = '4s'; }, 600); };
        window.scrollGallery = d => document.getElementById('gallery-container').scrollBy({ left: d * 320, behavior: 'smooth' });
        window.openImageModal = el => { const img = el.querySelector('img'); if (img) { document.getElementById('modal-image').src = img.src; document.getElementById('image-modal').classList.remove('hidden'); } };
        window.closeImageModal = () => document.getElementById('image-modal').classList.add('hidden');
        window.openReviewModal = () => document.getElementById('review-modal').classList.remove('hidden');
        window.closeReviewModal = () => document.getElementById('review-modal').classList.add('hidden');
        
        window.addEventListener('load', () => { 
            const dIn = document.getElementById('book-date');
            if (dIn) dIn.min = new Date().toISOString().split('T')[0];
        });
    </script>
</body>
</html>
